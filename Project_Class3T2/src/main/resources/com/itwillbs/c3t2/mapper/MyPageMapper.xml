<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
    

<mapper namespace="com.itwillbs.c3t2.mapper.MyPageMapper">
	
    
	<!-- 회원상세정보 조회 -->
	<select id = "selectMemberDetails" resultType="com.itwillbs.c3t2.vo.MemberVO">
		SELECT*
		FROM MEMBER 
		WHERE member_id = #{member_id}
	</select>
	
	
	<!-- 특정 회원의 모든 리뷰를 조회 -->
	<select id="selectReviewDetail" resultType="com.itwillbs.c3t2.vo.ReviewVO">
	    SELECT r.*, m.member_name
	    FROM REVIEW r
	    JOIN MEMBER m ON r.member_num = m.member_num
	    WHERE r.member_num = #{member_num}
	</select>
	
	<!-- 상품 구매 내역 -->
	<select id="getOrderList" resultType="com.itwillbs.c3t2.vo.UserOrderVO">
        SELECT u.*, m.member_name
		FROM USER_ORDER u
		JOIN MEMBER m ON u.member_num = m.member_num
		WHERE u.member_num = #{member_num}
    </select>
	
	<!-- 비밀번호 맞나 확인 -->
	<select id = "selectMember" resultType="com.itwillbs.c3t2.vo.MemberVO">
		SELECT member_passwd 
		FROM MEMBER 
		WHERE member_id = #{member_id}
	</select>
	
	<!-- 찜목록 -->
	<select id="getFavorite" resultType="com.itwillbs.c3t2.vo.FavoriteVO">
        SELECT 
            F.favorite_num,
            F.member_id,
            F.product_num,
            P.product_name,
            P.product_main_img_real_file
        FROM 
            FAVORITE F
        JOIN 
            PRODUCT P ON F.product_num = P.product_num
        WHERE 
            F.member_id = #{member_id}
    </select>
    
    <!-- 찜목록 삭제-->
    <delete id="deleteFavorite">
       DELETE FROM FAVORITE WHERE favorite_num = #{favoriteNum}
    </delete>
</mapper>